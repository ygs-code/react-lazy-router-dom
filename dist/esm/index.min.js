/*!
 * react-lazy-router-dom v0.0.2
 * (c) 2022-2023 yao guan shou (姚观寿) 281113270@qq.com
 * Released under the MIT License.
 */
import t from"prop-types";import e,{Children as n,cloneElement as r,createElement as o,Component as i,createContext as c}from"react";import a from"@babel/runtime/regenerator";import u from"hoist-non-react-statics";function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y=function t(e){return t.loaderArr=[].concat(f(t.loaderArr),[e]),function(){return e().then((function(t){return t.default})).catch((function(t){throw new Error(t)}))}};y.loaderArr=[];var m=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=[],o=s(y.loaderArr);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push(i())}}catch(t){o.e(t)}finally{o.f()}return Promise.all(r).then((function(){e()})).catch((function(t){throw n(t),new Error(t)}))};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},d=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function b(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function g(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function S(t,e){return t.keys=e,t}function w(t){return t&&t.sensitive?"":"i"}function x(t,e,n){return function(t,e,n){h(e)||(n=e||n,e=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,i="",c=0;c<t.length;c++){var a=t[c];if("string"==typeof a)i+=b(a);else{var u=b(a.prefix),l="(?:"+a.pattern+")";e.push(a),a.repeat&&(l+="(?:"+u+l+")*"),i+=l=a.optional?a.partial?u+"("+l+")?":"(?:"+u+"("+l+"))?":u+"("+l+")"}}var f=b(n.delimiter||"/"),s=i.slice(-f.length)===f;r||(i=(s?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?");i+=o?"$":r&&s?"":"(?="+f+"|$)";return S(new RegExp("^"+i,w(n)),e)}(function(t,e){for(var n,r=[],o=0,i=0,c="",a=e&&e.delimiter||"/";null!=(n=d.exec(t));){var u=n[0],l=n[1],f=n.index;if(c+=t.slice(i,f),i=f+u.length,l)c+=l[1];else{var s=t[i],p=n[2],y=n[3],m=n[4],v=n[5],h=n[6],S=n[7];c&&(r.push(c),c="");var w=null!=p&&null!=s&&s!==p,x="+"===h||"*"===h,$="?"===h||"*"===h,j=n[2]||a,O=m||v;r.push({name:y||o++,prefix:p||"",delimiter:j,optional:$,repeat:x,partial:w,asterisk:!!S,pattern:O?g(O):S?".*":"[^"+b(j)+"]+?"})}}return i<t.length&&(c+=t.substr(i)),c&&r.push(c),r}(t,n),e,n)}function $(t,e,n){return h(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return S(t,e)}(t,e):h(t)?function(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push($(t[o],e,n).source);return S(new RegExp("(?:"+r.join("|")+")",w(n)),e)}(t,e,n):x(t,e,n)}var j={},O=0,E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};("string"==typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,o=void 0!==r&&r,i=n.exact,c=void 0!==i&&i,a=n.strict,u=void 0!==a&&a,l=n.sensitive,f=void 0!==l&&l;return[].concat(o).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=j[n]||(j[n]={});if(r[t])return r[t];var o=[],i={regexp:$(t,o,e),keys:o};return O<1e4&&(r[t]=i,O++),i}(n,{end:c,strict:u,sensitive:f}),o=r.regexp,i=r.keys,a=o.exec(t);if(!a)return null;var l=a[0],s=a.slice(1),p=t===l;return c&&!p?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:p,params:i.reduce((function(t,e,n){return t[e.name]=s[n],t}),{})}}),null)},C=function(t){var e=t.children;return e?n.map(e,(function(e){return r(e,t)})):null};function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function P(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}function I(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function B(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}C.propTypes={component:t.oneOfType([t.func,t.object]).isRequired};var D,K,q=(D="Router",(K=c()).displayName=D,K),U=function(t){M(r,i);var e=L(r);function r(t){var n;R(this,r),B(k(n=e.call(this,t)),"computeRootMatch",(function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}}));var o=n.props,i=o.history,c=o.staticContext;return n.state={location:i.location},n._isMounted=!1,n._pendingLocation=null,c||(n.unlisten=i.listen((function(t){var e=t.location;n._pendingLocation=e}))),I(n,k(n))}return P(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0;var e=this.props,n=e.staticContext,r=e.history;this.unlisten&&this.unlisten(),n||(this.unlisten=r.listen((function(e){var n=e.location;t._isMounted&&t.setState({location:n})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})}},{key:"componentWillUnmount",value:function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)}},{key:"render",value:function(){var t=this.props,e=t.children,r=t.staticContext,i=t.loading,c=t.history,a=t.routesComponent,u=this.state.location;return o(q.Provider,{value:{history:c,location:u,staticContext:r,loading:i,routesComponent:a},children:e?n.only(e):null})}}]),r}();function W(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}U.propTypes={history:t.object.isRequired,staticContext:t.object,routesComponent:t.array,loading:function(t,e,n){if(!t[e])return new Error("In component ".concat(n," props ").concat(e," type is invalid -- expected a ").concat(e," is component"));try{t[e]}catch(t){return new Error("In component ".concat(n," props ").concat(e," type is invalid -- expected a ").concat(e," is component"))}}};var Y="production"===process.env.NODE_ENV,z="Invariant failed";function F(t,e){if(!t){if(Y)throw new Error(z);var n="function"==typeof e?e():e,r=n?"".concat(z,": ").concat(n):z;throw new Error(r)}}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}var G=function(t){var e=c();return e.displayName=t,e}("Router-Match"),H=function(t){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,s=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,d=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;return t===o||t===f||t===c||t===i||t===p||t===y||"object"===v(t)&&null!==t&&(t.$$typeof===o||t.$$typeof===f||t.$$typeof===c||t.$$typeof===i||t.$$typeof===p||t.$$typeof===y||t.$$typeof===n||t.$$typeof===l||t.$$typeof===r||t.$$typeof===h||t.$$typeof===m||t.$$typeof===a||t.$$typeof===u||t.$$typeof===s||t.$$typeof===b||t.$$typeof===g||t.$$typeof===S||t.$$typeof===d)},J=function(){return e.createElement("div",null," ")},Q=function(t){M(o,i);var r=V(o);function o(t){var i;return R(this,o),B(k(i=r.call(this,t)),"getSyncComponent",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if("object Object"===Object.prototype.toString.call(t).slice(1,-1)){if(H(t))return t;t.__esModule&&(t=i.getSyncComponent(t.default,e))}else if("object Function"===Object.prototype.toString.call(t).slice(1,-1))t=t(i.props),t=i.getSyncComponent(t,e);else if("object Promise"===Object.prototype.toString.call(t).slice(1,-1))return i.resolveComponent(t,e).then((function(t){e(t)})),null;return t})),B(k(i),"resolveComponent",function(){var t,e=(t=a.mark((function t(e){var n,r=arguments;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:function(){},"object Promise"!==Object.prototype.toString.call(e).slice(1,-1)){t.next=10;break}return t.next=4,e;case 4:return e=t.sent,t.next=7,i.resolveComponent(e,n);case 7:e=t.sent,t.next=11;break;case 10:e=i.getSyncComponent(e,n);case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){W(i,r,o,c,a,"next",t)}function a(t){W(i,r,o,c,a,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}()),B(k(i),"getComponent",(function(){var t,r,o=i.state,c=o.AsynComponent,a=o.locationKey,u=o.match,l=i.props.children,f=i.context,s=f.history,p=void 0===s?{}:s,y=f.location,m=void 0===y?{}:y,v=f.routesComponent,h=void 0===v?[]:v,d=m.key;if(!Object.keys(i.context).length)throw new Error(F(!1,"You should not use <Switch/> outside a <Router>"));if(d===a)return e.createElement(G.Provider,{value:{history:p,location:m,match:u}},e.createElement(c,{match:u,history:p,location:m,exact:u.isExact,routesComponent:h}));var b=null,g=null;return n.forEach(l,(function(t){if(null===b){var e=t.props,n=e.path,r=e.exact,o=e.strict,c=e.sensitive,a=e.from,u=e.component,l=e.element,f=e.render,s=n||a;u=u||l||f,(b=E(m.pathname,{path:s,exact:r,strict:o,sensitive:c}))&&(g=i.getSyncComponent(u,(function(t){i.setState({isSync:!1,AsynComponent:t,match:b,locationKey:d})})),g&&i.setState({isSync:!0,AsynComponent:g,match:b,locationKey:d}))}})),g?e.createElement(G.Provider,{value:{history:p,location:m,match:b}},e.createElement(g,{match:b,history:p,location:m,exact:null===(t=b)||void 0===t?void 0:t.isExact,routesComponent:h})):e.createElement(G.Provider,{value:{history:p,location:m,match:b}},e.createElement(c,{match:b,history:p,location:m,exact:null===(r=b)||void 0===r?void 0:r.isExact,routesComponent:h}))})),i.state={AsynComponent:J,locationKey:"",match:null,isSync:!0},i}return P(o,[{key:"componentDidMount",value:function(){var t=this.context.loading;t&&this.setState({AsynComponent:t})}},{key:"render",value:function(){return this.getComponent()}}]),o}();function X(){return X=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X.apply(this,arguments)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}Q.contextType=q,Q.propTypes={children:t.oneOfType([t.arrayOf(t.node),t.node]).isRequired};var tt=function(t){var n="withRouter("+(t.displayName||t.name)+")",r=function(r){M(a,i);var c=Z(a);function a(){return R(this,a),c.apply(this,arguments)}return P(a,[{key:"render",value:function(){var r=this;return o(G.Consumer,null,(function(o){return o||F(!1,"You should not use <"+n+" /> outside a <Switch>"),e.createElement(t,X({},o,r.props))}))}}]),a}();return r.displayName=n,r.WrappedComponent=t,u(r,t)};export{G as MatchContext,C as Route,U as Router,Q as Switch,q as __RouterContext,H as isValidElementType,y as lazy,E as matchPath,m as preloadReady,tt as withRouter};
